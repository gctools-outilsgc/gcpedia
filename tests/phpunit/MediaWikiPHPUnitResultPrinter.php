<?php

class MediaWikiPHPUnitResultPrinter extends PHPUnit_TextUI_ResultPrinter {
	protected function printDefectTrace( PHPUnit_Framework_TestFailure $defect ) {
		$test = $defect->failedTest();
		if ( $test !== null && isset( $test->_formattedMediaWikiLogs ) ) {
			$log = $test->_formattedMediaWikiLogs;
			if ( $log ) {
				$this->write( "=== Logs generated by test case\n{$log}\n===\n" );
			}
		}
		parent::printDefectTrace( $defect );
	}
}
